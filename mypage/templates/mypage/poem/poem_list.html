{% extends "base.html" %}
{% load static %}

{% block title %}ì‹œ ê³µëª¨ì „ ì‘í’ˆ{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/mypage/poem/poem_list.css' %}">
<style>
</style>
{% endblock %}

{% block content %}

<div class="poem-container">

    <!-- ì œëª© + ë²„íŠ¼ -->
    <div class="poem-top-bar">
        <h2 class="page-title">ğŸ“œ ì‹œ ê³µëª¨ì „ ì‘í’ˆ</h2>

        <a href="{% url 'mypage:poem_create' %}" class="btn-create-poem">
            âœ ì‹œ ì°½ì‘í•˜ê¸°
        </a>
    </div>

    <div class="poem-grid" >
        {% for poem in poem_list %}
<a href="/mypage/poems/{{ poem.public_uuid }}/" class="poem-card"
   style="background-image: url('{% if poem.image %}{{ poem.image.url }}{% else %}{% static 'images/default_poem_cover.jpg' %}{% endif %}');
          background-size: cover;
          background-position: center;">


            <div class="poem-header">
                {% if poem.status == 'winner' %}
                    <span class="badge-winner">ğŸ† ìˆ˜ìƒì‘</span>
                {% else %}
                    <span class="badge-normal">ì°¸ì—¬ì‘</span>
                {% endif %}
            </div>

            <h3 class="poem-title">{{ poem.title }}</h3>
            <p class="poem-content-preview">{{ poem.content|truncatechars:80 }}</p>

            <div class="poem-meta">
                <span class="poem-author">âœ’ {{ poem.user.nickname }}</span>
                <span class="poem-date">{{ poem.created_at|date:"Y.m.d" }}</span>
            </div>

        </a>
        {% empty %}
        <p class="empty-text">ì•„ì§ ë“±ë¡ëœ ì‹œ ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
    </div>

</div>

{% endblock %}

{% block extra_js %}{% endblock %}
