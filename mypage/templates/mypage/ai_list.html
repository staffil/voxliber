{% extends "base.html" %}
{% load static i18n %}

{% block title %}ë‚´ AI ìºë¦­í„° - VOXLIBER{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/mypage/ai_list.css' %}?v=2">
{% endblock %}

{% block content %}
<br><br><br>

<main class="ai-list-page">
    <!-- í—¤ë” -->


    <!-- ìŠ¤í† ë¦¬ ëª©ë¡ -->
    <section class="content-section">
        <div class="section-header">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“š</span>
                ìŠ¤í† ë¦¬ ëª©ë¡
            </h2>
            {% if story_list %}
            <span class="section-count">{{ story_list|length }}ê°œ</span>
            {% endif %}
        </div>

        {% if story_list %}
        <div class="story-grid">
            {% for story in story_list %}
            <a href="{% url 'character:story_detail' story.public_uuid %}" class="story-card">
<div class="card-image">
    {% if story.cover_image %}
        <img
            src="{{ story.cover_image.url }}"
            alt="{{ story.title }}"
            loading="lazy"
        >

    {% elif story.story_desc_video %}
        <video
            controls  
            loop
            muted
            playsinline
            preload="metadata"
            
        >
            <source src="{{ story.story_desc_video.url }}" type="video/mp4">
        </video>

    {% else %}
        <div class="image-placeholder">
            <span class="placeholder-icon">ğŸ“–</span>
        </div>
    {% endif %}

    <div class="card-badge {% if story.is_public %}public{% else %}private{% endif %}">
        {% if story.is_public %}ê³µê°œ{% else %}ë¹„ê³µê°œ{% endif %}
    </div>
</div>

                <div class="card-content">
                    <h3 class="card-title">{{ story.title }}</h3>
                    {% if story.description %}
                    <p class="card-desc">{{ story.description|truncatewords:20 }}</p>
                    {% endif %}
                    <div class="card-meta">
                        <span class="meta-item">
                            <span class="meta-icon">ğŸ‘¤</span>
                            ìºë¦­í„° {{ story.characters.count }}ëª…
                        </span>
                        <span class="meta-item">
                            <span class="meta-icon">ğŸ“…</span>
                            {{ story.created_at|date:"Y.m.d" }}
                        </span>
                    </div>
                </div>
            </a>
            
            {% endfor %}
        </div>
<br>
        <a href="{% url 'character:terms_ai' %}" class="create-btn">
            <span class="btn-icon">+</span>
            ìƒˆ ìŠ¤í† ë¦¬ ë§Œë“¤ê¸°
        </a>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">ğŸ“š</div>
            <h3 class="empty-title">ì•„ì§ ìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p class="empty-desc">ì²« ë²ˆì§¸ ìŠ¤í† ë¦¬ë¥¼ ë§Œë“¤ì–´ AI ìºë¦­í„°ì™€ í•¨ê»˜í•˜ì„¸ìš”!</p>
            <a href="{% url 'character:make_ai_story' %}" class="empty-btn" data-login-required>
                ìŠ¤í† ë¦¬ ë§Œë“¤ê¸°
            </a>
        </div>
        {% endif %}
    </section>

    <!-- AI ìºë¦­í„° ëª©ë¡ -->
    {% if llm_list %}
    <section class="content-section">
        <div class="section-header">
            <h2 class="section-title">
                <span class="section-icon">ğŸ¤–</span>
                AI ìºë¦­í„° ëª©ë¡
            </h2>
            <span class="section-count">{{ llm_list|length }}ëª…</span>
        </div>

        <div class="character-grid">
            {% for llm in llm_list %}
            <a href="{% url 'character:ai_intro' llm.public_uuid %}" class="character-card">
                <div class="card-avatar">
                    {% if llm.llm_image %}
                    <img src="{{ llm.llm_image.url }}" alt="{{ llm.name }}">
                    {% else %}
                    <div class="avatar-placeholder">ğŸ¤–</div>
                    {% endif %}
                </div>
                <div class="card-info">
                    <h3 class="card-name">{{ llm.name }}</h3>
                    {% if llm.story %}
                    <span class="card-story">{{ llm.story.title }}</span>
                    {% endif %}
                    {% if llm.description %}
                    <p class="card-bio">{{ llm.description|truncatewords:15 }}</p>
                    {% endif %}
                </div>
                <div class="card-action">
                    <span class="chat-btn">ëŒ€í™”í•˜ê¸°</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</main>

{% endblock %}

{% block extra_js %}
{% endblock %}
