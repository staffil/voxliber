{% extends "base.html" %}
{% load static %}

{% block title %}{{ playlist.title }} | VOXLIBER{% endblock %}
<style>
    /* =====================================================
   ì¥ë¥´ë³„ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸
   ===================================================== */
.genre-playlist-section {
  padding: 0 0 32px;
}

.playlist-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 20px;
}

.playlist-section-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: #fff;
  display: flex;
  align-items: center;
  gap: 8px;
}

.title-label {
  font-size: 0.65rem;
  font-weight: 700;
  background: linear-gradient(135deg, #f59e0b, #ef4444);
  color: #fff;
  padding: 2px 7px;
  border-radius: 20px;
  letter-spacing: 0.05em;
}

/* ìœ í˜• íƒ­ */
.playlist-type-tabs {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.playlist-type-tab {
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  color: rgba(255,255,255,0.5);
  background: rgba(255,255,255,0.06);
  cursor: pointer;
  transition: all 0.18s;
  user-select: none;
}

.playlist-type-tab:hover {
  color: #fff;
  background: rgba(255,255,255,0.12);
}

.playlist-type-tab.active {
  color: #fff;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
}

/* ì¹´ë“œ ê·¸ë¦¬ë“œ */
.playlist-cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

/* í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì¹´ë“œ */
.playlist-card {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px;
  overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;
}

.playlist-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 32px rgba(0,0,0,0.35);
}

/* ì»¤ë²„ ì•„íŠ¸ */
.playlist-card-art {
  position: relative;
  height: 140px;
  overflow: hidden;
  background: #1a1a2e;
}

.art-collage {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  height: 100%;
  gap: 2px;
}

.art-cell {
  overflow: hidden;
  background: #2d2d4e;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
}

.art-cell img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.art-cell.placeholder {
  opacity: 0.4;
}

.playlist-card-art-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, transparent 30%, rgba(0,0,0,0.7) 100%);
}

.playlist-genre-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: rgba(99,102,241,0.85);
  color: #fff;
  font-size: 0.7rem;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 10px;
  backdrop-filter: blur(4px);
}

.playlist-play-overlay {
  position: absolute;
  bottom: 10px;
  right: 10px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.playlist-play-overlay:hover {
  background: rgba(99,102,241,0.8);
}

/* ì¹´ë“œ ë°”ë”” */
.playlist-card-body {
  padding: 14px;
}

.playlist-card-title {
  font-size: 0.92rem;
  font-weight: 700;
  color: #fff;
  margin-bottom: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.playlist-card-desc {
  font-size: 0.72rem;
  color: rgba(255,255,255,0.45);
  margin-bottom: 10px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ë©”íƒ€ ì •ë³´ */
.playlist-card-meta {
  display: flex;
  gap: 10px;
  margin-bottom: 12px;
  flex-wrap: wrap;
}

.playlist-meta-item {
  display: flex;
  align-items: center;
  gap: 3px;
  font-size: 0.7rem;
  color: rgba(255,255,255,0.4);
}

/* ì—í”¼ì†Œë“œ ë¯¸ë¦¬ë³´ê¸° */
.playlist-episode-preview {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.playlist-ep-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 8px;
  text-decoration: none;
  color: inherit;
  transition: background 0.15s;
}

.playlist-ep-row:hover {
  background: rgba(255,255,255,0.07);
}

.ep-num {
  min-width: 18px;
  text-align: center;
  font-size: 0.72rem;
  color: rgba(255,255,255,0.3);
}

.ep-thumb {
  width: 36px;
  height: 36px;
  border-radius: 6px;
  overflow: hidden;
  flex-shrink: 0;
  background: #2d2d4e;
}

.ep-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.ep-thumb-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
}

.ep-info {
  flex: 1;
  min-width: 0;
}

.ep-title {
  font-size: 0.78rem;
  font-weight: 600;
  color: rgba(255,255,255,0.85);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ep-book {
  font-size: 0.68rem;
  color: rgba(255,255,255,0.35);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ep-duration {
  font-size: 0.68rem;
  color: rgba(255,255,255,0.3);
  flex-shrink: 0;
}

/* ë”ë³´ê¸° */
.playlist-more-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 8px;
  font-size: 0.75rem;
  color: rgba(255,255,255,0.4);
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.15s;
  margin-top: 2px;
}

.playlist-more-row:hover {
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.7);
}

/* ë¹ˆ ì¹´ë“œ */
.playlist-empty-card {
  text-align: center;
  padding: 48px 24px;
  color: rgba(255,255,255,0.3);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.playlist-empty-card code {
  background: rgba(255,255,255,0.08);
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 0.7rem;
}

/* ë°˜ì‘í˜• */
@media (max-width: 640px) {
  .playlist-cards-grid {
    grid-template-columns: 1fr;
  }

  .playlist-section-header {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style>
{% block content %}
<div class="main-container">
    <br><br><br><br>
  <div style="max-width:800px; margin:0 auto; padding:24px 16px;">

    <!-- í—¤ë” -->
    <div style="margin-bottom:24px;">
      <a href="/" style="color:rgba(255,255,255,0.5); font-size:0.85rem;">â† í™ˆìœ¼ë¡œ</a>
      <div style="margin-top:16px; display:flex; align-items:center; gap:12px;">
        <span style="background:#6366f1; padding:4px 10px; border-radius:20px; font-size:0.75rem;">
          {{ playlist.genre.name }}
        </span>
        <span style="color:rgba(255,255,255,0.5); font-size:0.8rem;">
          {{ playlist.get_playlist_type_display }}
        </span>
      </div>
      <h1 style="font-size:1.6rem; font-weight:700; margin-top:8px;">{{ playlist.title }}</h1>
      {% if playlist.description %}
      <p style="color:rgba(255,255,255,0.6); margin-top:6px;">{{ playlist.description }}</p>
      {% endif %}
      <p style="color:rgba(255,255,255,0.4); font-size:0.8rem; margin-top:8px;">
        ì´ {{ playlist.items.count }}í™” Â· {{ playlist.get_total_duration_formatted }}
      </p>
    </div>

    <!-- ì—í”¼ì†Œë“œ ëª©ë¡ -->
    <div style="display:flex; flex-direction:column; gap:8px;">
      {% for item in playlist.items.all %}
      <a href="{% url 'book:content_detail' item.content.public_uuid %}"
         style="display:flex; align-items:center; gap:12px; padding:12px; background:rgba(255,255,255,0.05); border-radius:12px; text-decoration:none; color:inherit; transition:background 0.2s;"
         onmouseover="this.style.background='rgba(255,255,255,0.1)'"
         onmouseout="this.style.background='rgba(255,255,255,0.05)'"
         data-login-required>
        <span style="min-width:28px; text-align:center; font-size:0.85rem; color:rgba(255,255,255,0.35);">
          {{ forloop.counter }}
        </span>
        <div style="width:48px; height:48px; border-radius:8px; overflow:hidden; flex-shrink:0;">
          {% if item.content.book.cover_img %}
            <img src="{{ item.content.book.cover_img.url }}" alt="" style="width:100%; height:100%; object-fit:cover;">
          {% else %}
            <div style="width:100%; height:100%; background:#2d2d4e; display:flex; align-items:center; justify-content:center;">ğŸ§</div>
          {% endif %}
        </div>
        <div style="flex:1; min-width:0;">
          <div style="font-size:0.9rem; font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">
            {{ item.content.title }}
          </div>
          <div style="font-size:0.75rem; color:rgba(255,255,255,0.45); margin-top:2px;">
            {{ item.content.book.name }}
          </div>
        </div>
        <span style="font-size:0.75rem; color:rgba(255,255,255,0.35); flex-shrink:0;">
          {{ item.content.get_duration_formatted }}
        </span>
      </a>
      {% empty %}
      <div style="text-align:center; padding:48px; color:rgba(255,255,255,0.3);">
        ì—í”¼ì†Œë“œê°€ ì—†ìŠµë‹ˆë‹¤
      </div>
      {% endfor %}
    </div>

  </div>
</div>
{% endblock %}