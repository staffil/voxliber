{% extends "base.html" %}
{% load static %}

{% block title %}VOXLIBER - ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ì˜¤ë””ì˜¤ë¶ìœ¼ë¡œ{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home/main/audio.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/banner.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/common.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/main.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/poem.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/ranking.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/recent.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/resume.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/snap.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/snippet.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/spotlight.css' %}">
<link rel="stylesheet" href="{% static 'css/home/main/genres.css' %}">

<style>
/* ============================================================
   VOXLIBER CREATOR ECOSYSTEM â€” Main Page
   ì»¨ì…‰: "ì—¬ê¸°ì„œ í™œë™í•˜ë©´ ë‚˜ë„ ì°½ì‘ìê°€ ë  ìˆ˜ ìˆê² ë‹¤"
   íƒ€ê²Ÿ: ì„±ì¥ ìš•êµ¬ ìˆëŠ” ì´ˆë³´ ì°½ì‘ì
   í†¤: ë”°ëœ»í•˜ê³  ì§„ì§€í•œ ë™ê¸°ë¶€ì—¬ + ì¸ë””ê³ /ë³´ë¼ ì‹œìŠ¤í…œ
   ============================================================ */

.vm-page {
  font-family: 'Poppins', sans-serif;
  min-height: 100vh;
  padding-top: 80px;
}

.vm-inner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--spacing-lg, 24px);
}

.vm-section { padding: 72px 0; }

/* â”€â”€ ê³µí†µ eyebrow â”€â”€ */
.vm-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 0.68rem;
  font-weight: 700;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--primary, #6366f1);
  margin-bottom: 10px;
}
.vm-eyebrow::before {
  content: '';
  width: 18px; height: 2px;
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#8b5cf6));
  border-radius: 99px;
  flex-shrink: 0;
}

/* â”€â”€ ì„¹ì…˜ íƒ€ì´í‹€ â”€â”€ */
.vm-title {
  font-size: clamp(1.6rem, 3vw, 2.4rem);
  font-weight: 900;
  color: var(--text-primary);
  letter-spacing: -0.035em;
  line-height: 1.12;
}
.vm-title .ac {
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#a78bfa));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* â”€â”€ ì„¹ì…˜ í—¤ë” row â”€â”€ */
.vm-hdr {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 32px;
}
.vm-more {
  font-size: 0.78rem;
  font-weight: 600;
  color: var(--primary, #6366f1);
  border-bottom: 1px solid rgba(99,102,241,0.28);
  padding-bottom: 1px;
  transition: opacity .18s;
  white-space: nowrap;
}
.vm-more:hover { opacity: .6; }

/* ============================================================
   HERO â€” "ê¸°íšŒ"ë¥¼ íŒŒëŠ” íˆì–´ë¡œ
   ============================================================ */
.vm-hero {
  position: relative;
  min-height: 100vh;
  display: flex;
  align-items: center;
  overflow: hidden;
}

/* ë°°ê²½ ë ˆì´ì–´ë“¤ */
.vm-hero-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 70% 60% at 75% 40%, rgba(99,102,241,.16) 0%, transparent 55%),
    radial-gradient(ellipse 50% 70% at 5%  70%, rgba(139,92,246,.10) 0%, transparent 55%),
    radial-gradient(ellipse 40% 40% at 50% 10%, rgba(99,102,241,.06) 0%, transparent 60%),
    var(--bg-secondary, #1a1a2e);
  pointer-events: none;
}

.vm-hero-grid {
  position: absolute; inset: 0;
  background-image:
    linear-gradient(rgba(255,255,255,.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.025) 1px, transparent 1px);
  background-size: 56px 56px;
  mask-image: radial-gradient(ellipse 65% 55% at 50% 50%, black, transparent);
  pointer-events: none;
}

body.light-mode .vm-hero-bg {
  background:
    radial-gradient(ellipse 70% 60% at 75% 40%, rgba(99,102,241,.08) 0%, transparent 55%),
    #f0f0ff;
}
body.light-mode .vm-hero-grid {
  background-image:
    linear-gradient(rgba(0,0,0,.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,0,0,.025) 1px, transparent 1px);
}

/* íˆì–´ë¡œ ë ˆì´ì•„ì›ƒ */
.vm-hero-layout {
  position: relative;
  z-index: 2;
  display: grid;
  grid-template-columns: 1fr 420px;
  gap: 60px;
  align-items: center;
  width: 100%;
  padding: 80px 0;
}

@media (max-width: 1100px) { .vm-hero-layout { grid-template-columns: 1fr; } }

/* ì¢Œì¸¡ í…ìŠ¤íŠ¸ */
.vm-hero-left {}

.vm-hero-kicker {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(99,102,241,.1);
  border: 1px solid rgba(99,102,241,.25);
  border-radius: 99px;
  padding: 6px 16px;
  font-size: .7rem;
  font-weight: 700;
  color: #a5b4fc;
  letter-spacing: .09em;
  text-transform: uppercase;
  margin-bottom: 28px;
}
body.light-mode .vm-hero-kicker { color: #6366f1; }

.vm-kicker-dot {
  width: 6px; height: 6px;
  background: #6366f1;
  border-radius: 50%;
  box-shadow: 0 0 9px #6366f1;
  animation: ecoPulse 2s ease infinite;
}
@keyframes ecoPulse {
  0%,100% { opacity:1; transform:scale(1); }
  50% { opacity:.3; transform:scale(.6); }
}

.vm-hero-h1 {
  font-size: clamp(2.4rem, 5.8vw, 4.6rem);
  font-weight: 900;
  line-height: 1.04;
  letter-spacing: -.04em;
  color: var(--text-primary);
  margin-bottom: 10px;
}
.vm-hero-h1 .grd {
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#a78bfa));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
body.light-mode .vm-hero-h1 { color: #0f172a; }

.vm-hero-tagline {
  font-size: clamp(1rem, 1.8vw, 1.25rem);
  font-weight: 400;
  color: rgba(255,255,255,.48);
  line-height: 1.6;
  max-width: 500px;
  margin-bottom: 40px;
}
body.light-mode .vm-hero-tagline { color: #64748b; }

/* íˆì–´ë¡œ ë²„íŠ¼ */
.vm-hero-btns {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 56px;
}

.vm-btn-cta {
  display: inline-flex;
  align-items: center;
  gap: 9px;
  padding: 15px 30px;
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#8b5cf6));
  color: #fff;
  font-family: 'Poppins', sans-serif;
  font-size: .92rem;
  font-weight: 700;
  border-radius: var(--radius-full, 999px);
  box-shadow: 0 8px 28px rgba(99,102,241,.42);
  transition: transform .22s, box-shadow .22s;
}
.vm-btn-cta:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 14px 36px rgba(99,102,241,.55);
}

.vm-btn-outline {
  display: inline-flex;
  align-items: center;
  gap: 9px;
  padding: 15px 28px;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.13);
  color: rgba(255,255,255,.75);
  font-size: .92rem;
  font-weight: 600;
  border-radius: var(--radius-full, 999px);
  transition: background .2s, border-color .2s;
}
.vm-btn-outline:hover {
  background: rgba(255,255,255,.09);
  border-color: rgba(255,255,255,.24);
}
body.light-mode .vm-btn-outline {
  background: rgba(0,0,0,.04);
  border-color: rgba(0,0,0,.11);
  color: #374151;
}

/* íˆì–´ë¡œ ì†Œì…œ í”„ë£¨í”„ */
.vm-hero-proof {
  display: flex;
  align-items: center;
  gap: 32px;
  flex-wrap: wrap;
  padding-top: 32px;
  border-top: 1px solid rgba(255,255,255,.07);
}
body.light-mode .vm-hero-proof { border-top-color: rgba(0,0,0,.07); }

.vm-proof-item {}
.vm-proof-num {
  font-size: 1.75rem;
  font-weight: 900;
  letter-spacing: -.03em;
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#a78bfa));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1;
}
.vm-proof-lbl {
  font-size: .66rem;
  font-weight: 600;
  color: rgba(255,255,255,.32);
  text-transform: uppercase;
  letter-spacing: .1em;
  margin-top: 4px;
}
body.light-mode .vm-proof-lbl { color: #94a3b8; }

.vm-proof-div {
  width: 1px; height: 36px;
  background: rgba(255,255,255,.08);
}
body.light-mode .vm-proof-div { background: rgba(0,0,0,.08); }

/* ìš°ì¸¡ ë¯¸ë‹ˆ ìŠ¤íƒ (ë°ìŠ¤í¬íƒ‘) */
.vm-hero-right {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
@media (max-width: 1100px) { .vm-hero-right { display: none; } }

.vm-preview-card {
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 16px;
  overflow: hidden;
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px;
  transition: border-color .25s, transform .25s;
}
body.light-mode .vm-preview-card {
  background: #fff;
  border-color: rgba(0,0,0,.07);
  box-shadow: 0 4px 16px rgba(0,0,0,.07);
}
.vm-preview-card:hover {
  border-color: rgba(99,102,241,.3);
  transform: translateX(-4px);
}

.vm-preview-cover {
  width: 52px; height: 68px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
  background: rgba(99,102,241,.1);
}
.vm-preview-cover img { width:100%; height:100%; object-fit:cover; }
.vm-preview-cover-empty {
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center;
  font-size: 1.3rem;
}

.vm-preview-info { flex: 1; min-width: 0; }
.vm-preview-name {
  font-size: .82rem;
  font-weight: 700;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.vm-preview-author {
  font-size: .7rem;
  color: rgba(255,255,255,.38);
  margin-top: 2px;
}
body.light-mode .vm-preview-author { color: #94a3b8; }
.vm-preview-badge {
  font-size: .58rem;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 99px;
  background: rgba(99,102,241,.15);
  color: #a5b4fc;
  margin-top: 5px;
  display: inline-block;
}
body.light-mode .vm-preview-badge { background: rgba(99,102,241,.08); color: #6366f1; }

.vm-preview-play {
  width: 34px; height: 34px;
  border-radius: 50%;
  background: rgba(99,102,241,.14);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  transition: background .2s;
}
.vm-preview-card:hover .vm-preview-play {
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#8b5cf6));
}

/* ============================================================
   ì„ ìˆœí™˜ CYCLE â€” ì°½ì‘ â†’ ì˜¤ë””ì˜¤í™” â†’ ê³µìœ  â†’ ìˆ˜ìµ
   ============================================================ */
.vm-cycle {
  background: rgba(255,255,255,.02);
  border-top: 1px solid rgba(255,255,255,.06);
  border-bottom: 1px solid rgba(255,255,255,.06);
  padding: 80px 0;
}
body.light-mode .vm-cycle {
  background: rgba(99,102,241,.025);
  border-color: rgba(99,102,241,.09);
}

.vm-cycle-intro {
  text-align: center;
  margin-bottom: 60px;
}
.vm-cycle-desc {
  font-size: 1rem;
  font-weight: 300;
  color: rgba(255,255,255,.45);
  margin-top: 12px;
  max-width: 420px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.7;
}
body.light-mode .vm-cycle-desc { color: #64748b; }

.vm-cycle-steps {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 2px;
  position: relative;
}
@media (max-width: 900px) {
  .vm-cycle-steps { grid-template-columns: repeat(2, 1fr); gap: 12px; }
}
@media (max-width: 480px) {
  .vm-cycle-steps { grid-template-columns: 1fr; }
}

/* ì—°ê²°ì„  */
.vm-cycle-steps::before {
  content: '';
  position: absolute;
  top: 38px;
  left: calc(12.5% + 8px);
  width: calc(75% - 16px);
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(99,102,241,.35), rgba(139,92,246,.35), transparent);
  pointer-events: none;
}
@media (max-width: 900px) { .vm-cycle-steps::before { display: none; } }

.vm-cycle-step {
  position: relative;
  padding: 32px 24px 28px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 18px;
  transition: border-color .25s, transform .25s, background .25s;
  text-align: center;
}
body.light-mode .vm-cycle-step {
  background: #fff;
  border-color: rgba(0,0,0,.07);
  box-shadow: 0 3px 16px rgba(0,0,0,.05);
}
.vm-cycle-step:hover {
  border-color: rgba(99,102,241,.28);
  background: rgba(99,102,241,.05);
  transform: translateY(-5px);
}

.vm-cycle-num {
  width: 32px; height: 32px;
  border-radius: 50%;
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#8b5cf6));
  display: flex; align-items: center; justify-content: center;
  font-size: .68rem;
  font-weight: 800;
  color: #fff;
  margin: 0 auto 18px;
  box-shadow: 0 4px 14px rgba(99,102,241,.38);
}

.vm-cycle-icon {
  font-size: 2.2rem;
  margin-bottom: 16px;
  display: block;
}

.vm-cycle-step h3 {
  font-size: .95rem;
  font-weight: 800;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.vm-cycle-step p {
  font-size: .81rem;
  font-weight: 300;
  color: rgba(255,255,255,.42);
  line-height: 1.68;
}
body.light-mode .vm-cycle-step p { color: #64748b; }

/* í™”ì‚´í‘œ */
.vm-cycle-arrow {
  position: absolute;
  right: -14px;
  top: 38px;
  width: 24px; height: 24px;
  background: var(--bg-secondary, #1a1a2e);
  border: 1px solid rgba(99,102,241,.3);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  z-index: 1;
  color: #6366f1;
}
@media (max-width: 900px) { .vm-cycle-arrow { display: none; } }

/* ============================================================
   PROMO BANNER
   ============================================================ */
.vm-promo {
  border-radius: 20px;
  overflow: hidden;
  position: relative;
  box-shadow: 0 16px 48px rgba(0,0,0,.35);
  margin: 0 0 0;
}
.vm-promo-track {
  display: flex;
  transition: transform .45s cubic-bezier(.77,0,.175,1);
}
.vm-promo-slide { flex: 0 0 100%; height: 220px; }
.vm-promo-slide img { width:100%; height:100%; object-fit:cover; display:block; }
.vm-promo-nav {
  position: absolute;
  top: 50%; transform: translateY(-50%);
  width: 34px; height: 34px;
  border-radius: 50%;
  background: rgba(0,0,0,.5);
  border: 1px solid rgba(255,255,255,.15);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; z-index: 4; color: #fff;
  transition: background .2s;
}
.vm-promo-nav:hover { background: rgba(99,102,241,.7); }
.vm-promo-nav.prev { left: 12px; }
.vm-promo-nav.next { right: 12px; }
.vm-promo-dots {
  position: absolute;
  bottom: 10px; left: 50%; transform: translateX(-50%);
  display: flex; gap: 6px; z-index: 4;
}
.vm-promo-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: rgba(255,255,255,.3);
  cursor: pointer;
  transition: background .2s, transform .2s;
}
.vm-promo-dot.on { background: var(--primary,#6366f1); transform: scale(1.4); }

/* ============================================================
   TABS
   ============================================================ */
.vm-tabs-bar {
  position: sticky;
  top: 64px;
  z-index: 90;
  background: var(--bg-secondary, #1a1a2e);
  border-bottom: 1px solid rgba(255,255,255,.07);
}
body.light-mode .vm-tabs-bar {
  background: #f4f4ff;
  border-bottom-color: rgba(0,0,0,.07);
}
.vm-tabs-inner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--spacing-lg, 24px);
  display: flex;
}
.vm-tab {
  padding: 15px 24px;
  font-family: 'Poppins', sans-serif;
  font-size: .92rem;
  font-weight: 700;
  color: rgba(255,255,255,.38);
  cursor: pointer;
  border-bottom: 3px solid transparent;
  transition: color .22s, border-color .22s;
  user-select: none;
}
body.light-mode .vm-tab { color: rgba(0,0,0,.35); }
.vm-tab:hover { color: rgba(255,255,255,.75); }
body.light-mode .vm-tab:hover { color: rgba(0,0,0,.68); }
.vm-tab.active { color: #fff; border-bottom-color: var(--primary,#6366f1); }
body.light-mode .vm-tab.active { color: #0f172a; border-bottom-color: #6366f1; }
.vm-panel { display: none; }
.vm-panel.active { display: block; }

/* ============================================================
   GENRE CHIP
   ============================================================ */
.vm-chips {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 28px;
}
.vm-chip {
  padding: 6px 16px;
  border-radius: 99px;
  font-family: 'Poppins', sans-serif;
  font-size: .73rem;
  font-weight: 600;
  border: 1px solid rgba(255,255,255,.1);
  color: rgba(255,255,255,.46);
  cursor: pointer;
  background: transparent;
  transition: all .18s;
}
body.light-mode .vm-chip { border-color: rgba(0,0,0,.1); color: rgba(0,0,0,.42); }
.vm-chip:hover, .vm-chip.on {
  background: rgba(99,102,241,.14);
  border-color: rgba(99,102,241,.36);
  color: #a5b4fc;
}
body.light-mode .vm-chip:hover,
body.light-mode .vm-chip.on { background: rgba(99,102,241,.08); border-color: rgba(99,102,241,.28); color: #6366f1; }

/* ============================================================
   BOOK CARD GRID
   ============================================================ */
.vm-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(148px, 1fr));
  gap: 18px;
}
@media (max-width: 480px) { .vm-grid { grid-template-columns: repeat(2,1fr); gap: 12px; } }

.vm-bk { position: relative; cursor: pointer; transition: transform .24s; }
.vm-bk:hover { transform: translateY(-6px); }

.vm-bk-cover {
  aspect-ratio: 3/4;
  border-radius: 11px;
  overflow: hidden;
  background: var(--bg-tertiary, #0f0f1a);
  border: 1px solid rgba(255,255,255,.06);
  position: relative;
}
body.light-mode .vm-bk-cover {
  border-color: rgba(0,0,0,.07);
  box-shadow: 0 3px 12px rgba(0,0,0,.08);
}
.vm-bk-cover img { width:100%; height:100%; object-fit:cover; transition: transform .4s; }
.vm-bk:hover .vm-bk-cover img { transform: scale(1.06); }

.vm-bk-empty {
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center;
  font-size: 2rem;
  background: linear-gradient(135deg, rgba(99,102,241,.15), rgba(139,92,246,.1));
}
.vm-bk-genre {
  position: absolute; top: 9px; left: 9px;
  background: rgba(0,0,0,.62);
  border-radius: 99px;
  padding: 3px 9px;
  font-size: .6rem; font-weight: 700;
  color: rgba(255,255,255,.88);
  letter-spacing: .04em;
}
.vm-bk-hover {
  position: absolute; inset: 0;
  background: linear-gradient(transparent 45%, rgba(0,0,0,.74));
  border-radius: 11px;
  display: flex; align-items: flex-end; padding: 12px;
  opacity: 0; transition: opacity .22s;
}
.vm-bk:hover .vm-bk-hover { opacity: 1; }
.vm-play-btn {
  width: 36px; height: 36px;
  border-radius: 50%;
  background: var(--gradient-primary, linear-gradient(135deg,#6366f1,#8b5cf6));
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 4px 14px rgba(99,102,241,.48);
}
.vm-bk-meta { margin-top: 10px; padding: 0 2px; }
.vm-bk-name {
  font-size: .83rem; font-weight: 700;
  color: var(--text-primary);
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.vm-bk-author {
  font-size: .7rem; font-weight: 400;
  color: rgba(255,255,255,.36);
  margin-top: 2px;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
body.light-mode .vm-bk-author { color: #94a3b8; }
.vm-bk-score {
  font-size: .68rem; font-weight: 600; color: #f59e0b;
  margin-top: 4px; display: flex; align-items: center; gap: 3px;
}

/* ============================================================
   RANKING
   ============================================================ */
.vm-rank-list { display: flex; flex-direction: column; gap: 2px; margin-top: 28px; }
.vm-rank-row {
  display: flex; align-items: center; gap: 14px;
  padding: 12px 14px;
  border-radius: 12px; border: 1px solid transparent;
  transition: background .18s, border-color .18s; cursor: pointer;
}
.vm-rank-row:hover {
  background: rgba(255,255,255,.035);
  border-color: rgba(255,255,255,.07);
}
body.light-mode .vm-rank-row:hover { background: rgba(0,0,0,.03); border-color: rgba(0,0,0,.06); }

.vm-rn {
  font-size: 1.1rem; font-weight: 900;
  width: 28px; text-align: center; flex-shrink: 0;
  color: rgba(255,255,255,.22);
}
body.light-mode .vm-rn { color: rgba(0,0,0,.18); }
.vm-rn.g1 { background: linear-gradient(135deg,#f59e0b,#fbbf24); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.vm-rn.g2 { background: linear-gradient(135deg,#94a3b8,#cbd5e1); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.vm-rn.g3 { background: linear-gradient(135deg,#b45309,#d97706); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }

.vm-rthumb {
  width: 48px; height: 64px;
  border-radius: 8px; overflow: hidden; flex-shrink: 0;
  background: var(--bg-tertiary, #0f0f1a);
}
.vm-rthumb img { width:100%; height:100%; object-fit:cover; }
.vm-rthumb-empty { width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-size:1.1rem; }

.vm-rinfo { flex: 1; min-width: 0; }
.vm-rtitle { font-size: .88rem; font-weight: 700; color: var(--text-primary); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.vm-rauthor { font-size: .73rem; color: rgba(255,255,255,.36); margin-top: 2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
body.light-mode .vm-rauthor { color: #94a3b8; }
.vm-rgenre {
  display: inline-block; margin-top: 5px; padding: 2px 9px;
  border-radius: 99px; font-size: .63rem; font-weight: 700;
  background: rgba(99,102,241,.12); color: #a5b4fc;
}
body.light-mode .vm-rgenre { background: rgba(99,102,241,.08); color: #6366f1; }
.vm-rscore { font-size: .84rem; font-weight: 800; color: #f59e0b; flex-shrink: 0; }

.vm-live {
  display: inline-block; width: 7px; height: 7px;
  background: #ef4444; border-radius: 50%;
  box-shadow: 0 0 8px #ef4444;
  margin-right: 5px;
  animation: ecoPulse 1.5s ease infinite;
}

/* ============================================================
   EPISODE STRIP
   ============================================================ */
.vm-ep-strip {
  display: flex; gap: 12px; overflow-x: auto; padding-bottom: 10px;
  margin-top: 28px;
  scrollbar-width: thin;
  scrollbar-color: rgba(99,102,241,.28) transparent;
}
.vm-ep-card {
  flex-shrink: 0; width: 215px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 14px; overflow: hidden;
  transition: border-color .22s, transform .22s;
}
body.light-mode .vm-ep-card { background:#fff; border-color:rgba(0,0,0,.07); box-shadow:0 2px 10px rgba(0,0,0,.06); }
.vm-ep-card:hover { border-color: rgba(99,102,241,.3); transform: translateY(-4px); }

.vm-ep-thumb { height: 115px; overflow:hidden; background: var(--bg-tertiary,#0f0f1a); position:relative; }
.vm-ep-thumb img { width:100%; height:100%; object-fit:cover; transition:transform .4s; }
.vm-ep-card:hover .vm-ep-thumb img { transform: scale(1.07); }
.vm-ep-thumb-empty { width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-size:1.7rem; background:linear-gradient(135deg,rgba(99,102,241,.15),rgba(139,92,246,.1)); }
.vm-ep-new { position:absolute; top:8px; right:8px; background:#ef4444; color:#fff; font-size:.57rem; font-weight:800; padding:3px 7px; border-radius:99px; letter-spacing:.07em; }

.vm-ep-body { padding: 13px; }
.vm-ep-n { font-size:.67rem; font-weight:700; color:var(--primary,#6366f1); margin-bottom:4px; }
.vm-ep-t { font-size:.85rem; font-weight:700; color:var(--text-primary); line-height:1.35; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }
.vm-ep-b { font-size:.7rem; color:rgba(255,255,255,.33); margin-top:5px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
body.light-mode .vm-ep-b { color:#94a3b8; }

/* ============================================================
   CONTINUE LISTENING
   ============================================================ */
.vm-cont-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(205px, 1fr));
  gap: 12px;
  margin-top: 24px;
}
.vm-cont-card {
  display: flex; align-items: center; gap: 12px; padding: 12px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 14px;
  transition: border-color .2s, transform .2s;
  cursor: pointer;
}
body.light-mode .vm-cont-card { background:#fff; border-color:rgba(0,0,0,.07); box-shadow:0 2px 10px rgba(0,0,0,.05); }
.vm-cont-card:hover { border-color: rgba(99,102,241,.28); transform: translateY(-2px); }
.vm-cont-thumb { width:50px; height:66px; border-radius:8px; overflow:hidden; flex-shrink:0; background:var(--bg-tertiary,#0f0f1a); }
.vm-cont-thumb img { width:100%; height:100%; object-fit:cover; }
.vm-cont-thumb-e { width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-size:1.2rem; }
.vm-cont-info { flex:1; min-width:0; }
.vm-cont-name { font-size:.8rem; font-weight:700; color:var(--text-primary); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.vm-cont-ep { font-size:.67rem; font-weight:600; color:var(--primary,#6366f1); margin-top:2px; }
.vm-cont-time { font-size:.63rem; color:rgba(255,255,255,.28); margin-top:3px; }
body.light-mode .vm-cont-time { color:#94a3b8; }
.vm-cont-btn { width:30px; height:30px; border-radius:50%; background:rgba(99,102,241,.13); display:flex; align-items:center; justify-content:center; flex-shrink:0; transition:background .2s; }
.vm-cont-card:hover .vm-cont-btn { background:var(--gradient-primary,linear-gradient(135deg,#6366f1,#8b5cf6)); }

/* ============================================================
   CTA STRIP â€” "ì°½ì‘ìë¡œ ë°ë·”í•˜ì„¸ìš”"
   ============================================================ */
.vm-cta {
  background: linear-gradient(110deg,
    rgba(99,102,241,.13) 0%,
    rgba(139,92,246,.09) 50%,
    rgba(99,102,241,.05) 100%);
  border: 1px solid rgba(99,102,241,.2);
  border-radius: 20px;
  padding: 52px 52px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 32px;
  flex-wrap: wrap;
  position: relative;
  overflow: hidden;
}
.vm-cta::before {
  content: '';
  position: absolute;
  top: -100px; right: -100px;
  width: 350px; height: 350px;
  background: radial-gradient(circle, rgba(139,92,246,.14) 0%, transparent 70%);
  pointer-events: none;
}
.vm-cta::after {
  content: '';
  position: absolute;
  bottom: -60px; left: -60px;
  width: 260px; height: 260px;
  background: radial-gradient(circle, rgba(99,102,241,.1) 0%, transparent 70%);
  pointer-events: none;
}
body.light-mode .vm-cta {
  background: linear-gradient(110deg, rgba(99,102,241,.06), rgba(139,92,246,.04));
  border-color: rgba(99,102,241,.14);
}
.vm-cta-text { position: relative; z-index: 1; }
.vm-cta-text h2 {
  font-size: clamp(1.3rem, 2.4vw, 1.9rem);
  font-weight: 900;
  letter-spacing: -.03em;
  color: var(--text-primary);
  margin-bottom: 8px;
}
.vm-cta-text p {
  font-size: .88rem;
  font-weight: 300;
  color: rgba(255,255,255,.45);
  max-width: 380px;
  line-height: 1.65;
}
body.light-mode .vm-cta-text p { color: #64748b; }

.vm-cta-action { position: relative; z-index: 1; flex-shrink: 0; }

/* ============================================================
   AUTHORS STRIP
   ============================================================ */
.vm-authors {
  display: flex; gap: 10px; overflow-x: auto; padding-bottom: 6px; margin-top: 28px;
  scrollbar-width: none;
}
.vm-authors::-webkit-scrollbar { display: none; }
.vm-auth-pill {
  flex-shrink: 0;
  display: flex; align-items: center; gap: 10px;
  padding: 10px 16px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 99px;
  cursor: pointer;
  transition: border-color .2s, transform .2s;
}
body.light-mode .vm-auth-pill { background:#fff; border-color:rgba(0,0,0,.08); box-shadow:0 2px 8px rgba(0,0,0,.05); }
.vm-auth-pill:hover { border-color: rgba(99,102,241,.28); transform: translateY(-2px); }
.vm-auth-rank { font-size:.67rem; font-weight:800; color:var(--primary,#6366f1); min-width:14px; }
.vm-auth-av {
  width: 36px; height: 36px;
  border-radius: 50%; overflow: hidden;
  background: rgba(99,102,241,.12); flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: .9rem; font-weight: 700; color: var(--primary,#6366f1);
}
.vm-auth-av img { width:100%; height:100%; object-fit:cover; }
.vm-auth-name { font-size:.82rem; font-weight:700; color:var(--text-primary); white-space:nowrap; }
.vm-auth-cnt { font-size:.67rem; color:rgba(255,255,255,.32); margin-top:1px; white-space:nowrap; }
body.light-mode .vm-auth-cnt { color:#94a3b8; }

/* ============================================================
   EMPTY
   ============================================================ */
.vm-empty {
  padding: 48px 20px; text-align: center;
  color: rgba(255,255,255,.22); font-size: .86rem;
  grid-column: 1 / -1;
}
body.light-mode .vm-empty { color: #cbd5e1; }

/* ============================================================
   FOOTER
   ============================================================ */
.vm-footer {
  background: var(--bg-primary, #0f0f1a);
  border-top: 1px solid rgba(255,255,255,.055);
  padding: 60px 0 36px;
  margin-top: 80px;
}
body.light-mode .vm-footer { background: #efeffa; border-top-color: rgba(0,0,0,.06); }
.vm-footer-g {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: 52px; margin-bottom: 52px;
}
@media (max-width: 768px) { .vm-footer-g { grid-template-columns: 1fr 1fr; gap: 32px; } }
@media (max-width: 480px) { .vm-footer-g { grid-template-columns: 1fr; } }
.vm-footer-logo {
  font-size: 1.55rem; font-weight: 900; letter-spacing: -.02em;
  background: var(--gradient-primary,linear-gradient(135deg,#6366f1,#a78bfa));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  margin-bottom: 10px;
}
.vm-footer-desc { font-size:.82rem; font-weight:300; color:rgba(255,255,255,.36); line-height:1.78; }
body.light-mode .vm-footer-desc { color:#64748b; }
.vm-footer-col h4 { font-size:.68rem; font-weight:800; letter-spacing:.13em; text-transform:uppercase; color:rgba(255,255,255,.26); margin-bottom:14px; }
body.light-mode .vm-footer-col h4 { color:#94a3b8; }
.vm-footer-col ul { list-style:none; display:flex; flex-direction:column; gap:10px; }
.vm-footer-col a { font-size:.82rem; color:rgba(255,255,255,.42); transition:color .18s; }
.vm-footer-col a:hover { color:#a5b4fc; }
body.light-mode .vm-footer-col a { color:#64748b; }
body.light-mode .vm-footer-col a:hover { color:#6366f1; }
.vm-footer-bot { border-top: 1px solid rgba(255,255,255,.05); padding-top:24px; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:10px; }
body.light-mode .vm-footer-bot { border-top-color: rgba(0,0,0,.05); }
.vm-footer-copy { font-size:.73rem; color:rgba(255,255,255,.2); }
body.light-mode .vm-footer-copy { color:#94a3b8; }

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 768px) {
  .vm-tabs-bar { top: 56px; }
  .vm-cta { padding: 28px 24px; }
  .vm-section { padding: 52px 0; }
}
@media (max-width: 480px) {
  .vm-tabs-bar { top: 50px; }
  .vm-hero { min-height: auto; }
  .vm-hero-layout { padding: 48px 0 40px; }
}
</style>
{% endblock %}


{% block content %}
<div class="vm-page">

  <!-- ============================================================
       HERO â€” "ê¸°íšŒ"ë¥¼ íŒŒëŠ” ì„¹ì…˜
       ============================================================ -->
  <section style="position:relative; overflow:hidden;">
    <div class="vm-hero-bg"></div>
    <div class="vm-hero-grid"></div>

    <div class="vm-inner vm-hero">
      <div class="vm-hero-layout">

        <!-- ì¢Œì¸¡: ë©”ì‹œì§€ -->
        <div class="vm-hero-left">
          <div class="vm-hero-kicker">
            <span class="vm-kicker-dot"></span>
            ì°½ì‘ìë¥¼ ìœ„í•œ í”Œë«í¼
          </div>

          <h1 class="vm-hero-h1">
            ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼<br>
            <span class="grd">ë“£ëŠ” ì½˜í…ì¸ ë¡œ</span><br>
            í™•ì¥í•˜ì„¸ìš”
          </h1>

          <p class="vm-hero-tagline">
            ê¸€ í•œ í¸ì´ ì˜¤ë””ì˜¤ë¶ì´ ë˜ê³ ,<br>
            ì°½ì‘ì´ ìˆ˜ìµì´ ë©ë‹ˆë‹¤.<br>
            <strong style="color:rgba(255,255,255,.75); font-weight:600;">ì§€ê¸ˆ ì—¬ê¸°ì„œ, ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•˜ì„¸ìš”.</strong>
          </p>

          <div class="vm-hero-btns">
            {% if user.is_authenticated %}
              <a href="{% url 'book:book_tos' %}" class="vm-btn-cta">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 000-1.41l-2.34-2.34a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                ì²« ì‘í’ˆ ë§Œë“¤ê¸°
              </a>
            {% else %}
              <a href="#" onclick="openLogin(); return false;" class="vm-btn-cta">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 000-1.41l-2.34-2.34a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                ë¬´ë£Œë¡œ ì°½ì‘ ì‹œì‘
              </a>
            {% endif %}
            <a href="#vm-browse" class="vm-btn-outline">
              <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
              ì‘í’ˆ ë‘˜ëŸ¬ë³´ê¸°
            </a>
          </div>

          <div class="vm-hero-proof">
            <div class="vm-proof-item">
              <div class="vm-proof-num">{{ audio_list.count }}+</div>
              <div class="vm-proof-lbl">ë“±ë¡ ì‘í’ˆ</div>
            </div>
            <div class="vm-proof-div"></div>
            <div class="vm-proof-item">
              <div class="vm-proof-num">AI</div>
              <div class="vm-proof-lbl">ìë™ ìŒì„± ë³€í™˜</div>
            </div>
            <div class="vm-proof-div"></div>
            <div class="vm-proof-item">
              <div class="vm-proof-num">ë¬´ë£Œ</div>
              <div class="vm-proof-lbl">ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘</div>
            </div>
          </div>
        </div>

        <!-- ìš°ì¸¡: ë¯¸ë‹ˆ ì‘í’ˆ í”„ë¦¬ë·° (ë°ìŠ¤í¬íƒ‘) -->
        <div class="vm-hero-right">
          {% for book in new_books|slice:":4" %}
          <a href="{% url 'book:book_detail' book.public_uuid %}" class="vm-preview-card">
            <div class="vm-preview-cover">
              {% if book.cover_img %}
                <img src="{{ book.cover_img.url }}" alt="{{ book.name }}" loading="lazy">
              {% else %}
                <div class="vm-preview-cover-empty">ğŸ“–</div>
              {% endif %}
            </div>
            <div class="vm-preview-info">
              <div class="vm-preview-name">{{ book.name }}</div>
              <div class="vm-preview-author">{{ book.user.nickname }}</div>
              <div class="vm-preview-badge">
                {% if book.genres.all.0 %}{{ book.genres.all.0.name }}{% else %}ì˜¤ë””ì˜¤ë¶{% endif %}
              </div>
            </div>
            <div class="vm-preview-play">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>
            </div>
          </a>
          {% endfor %}
        </div>

      </div>
    </div>
  </section>


  <!-- ============================================================
       ì„ ìˆœí™˜ CYCLE â€” ì°½ì‘ â†’ ì˜¤ë””ì˜¤í™” â†’ ê³µìœ  â†’ ìˆ˜ìµ
       ============================================================ -->
  <div class="vm-cycle">
    <div class="vm-inner">
      <div class="vm-cycle-intro">
        <div class="vm-eyebrow" style="justify-content:center;">ì°½ì‘ì ì„±ì¥ íë¦„</div>
        <h2 class="vm-title" style="text-align:center;">
          ê¸€ í•œ í¸ìœ¼ë¡œ ì‹œì‘ë˜ëŠ”<br><span class="ac">ì„ ìˆœí™˜ ì°½ì‘ ìƒíƒœê³„</span>
        </h2>
        <p class="vm-cycle-desc">
          ìœ ëª…í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.<br>
          ê¾¸ì¤€íˆ ì“°ê³ , AIê°€ ì†Œë¦¬ë¡œ ë§Œë“¤ê³ , íŒ¬ì´ ëª¨ì…ë‹ˆë‹¤.
        </p>
      </div>

      <div class="vm-cycle-steps">

        <div class="vm-cycle-step">
          <div class="vm-cycle-num">01</div>
          <span class="vm-cycle-icon">âœï¸</span>
          <h3>ì°½ì‘</h3>
          <p>ì›¹ì†Œì„¤, ì—ì„¸ì´, ì„¸ê³„ê´€ ì„¤ì •ì§‘... ì–´ë–¤ ê¸€ì´ë“  ì¢‹ìŠµë‹ˆë‹¤. ì´ˆë³´ë„ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”.</p>
          <div class="vm-cycle-arrow">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
          </div>
        </div>

        <div class="vm-cycle-step">
          <div class="vm-cycle-num">02</div>
          <span class="vm-cycle-icon">ğŸ¤–</span>
          <h3>ì˜¤ë””ì˜¤í™”</h3>
          <p>AIê°€ ìë™ìœ¼ë¡œ ìŒì„±ì„ ìƒì„±í•©ë‹ˆë‹¤. ìˆ˜ì‹­ ê°€ì§€ ëª©ì†Œë¦¬ ì¤‘ ë‚´ ì‘í’ˆì— ë§ëŠ” ê±¸ ê³ ë¥´ì„¸ìš”.</p>
          <div class="vm-cycle-arrow">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
          </div>
        </div>

        <div class="vm-cycle-step">
          <div class="vm-cycle-num">03</div>
          <span class="vm-cycle-icon">ğŸ§</span>
          <h3>ì—…ë¡œë“œ & ê³µìœ </h3>
          <p>í”Œë«í¼ì— ê³µê°œí•˜ë©´ ëˆ„êµ¬ë‚˜ ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§í¬ë¡œ SNSì— ë°”ë¡œ ê³µìœ í•˜ì„¸ìš”.</p>
          <div class="vm-cycle-arrow">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="currentColor"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
          </div>
        </div>

        <div class="vm-cycle-step">
          <div class="vm-cycle-num">04</div>
          <span class="vm-cycle-icon">ğŸ’°</span>
          <h3>ì²­ì·¨ & ìˆ˜ìµ</h3>
          <p>ì²­ì·¨ ìˆ˜ê°€ ìŒ“ì´ë©´ ê´‘ê³  ìˆ˜ìµì´ ë©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì°½ì‘ì´ ì§€ì† ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.</p>
        </div>

      </div>
    </div>
  </div>




  <!-- ============================================================
       MAIN TABS
       ============================================================ -->
  <div class="vm-tabs-bar">
    <div class="vm-tabs-inner">
      <div class="vm-tab active" data-p="vm-ab">ğŸ§ ì˜¤ë””ì˜¤ë¶</div>
      <div class="vm-tab" data-p="vm-ai">ğŸŒ™ AI ì†Œì„¤</div>
    </div>
  </div>


  <!-- ============================================================
       PANEL: ì˜¤ë””ì˜¤ë¶
       ============================================================ -->
  <div id="vm-ab" class="vm-panel active">

    <!-- ì´ì–´ë“£ê¸° -->
    {% if request.user.is_authenticated and recent_listening %}
    <div class="vm-inner vm-section" style="padding-bottom:0;">
      <div class="vm-eyebrow">ì´ì–´ë“£ê¸°</div>
      <h2 class="vm-title">{{ request.user.nickname }}ë‹˜,<br><span class="ac">ì—¬ê¸°ì„œ ë©ˆì·„ì–´ìš”</span></h2>
      <div class="vm-cont-grid">
        {% for h in recent_listening %}
        <a href="{% url 'book:content_detail' h.content.public_uuid %}" class="vm-cont-card">
          <div class="vm-cont-thumb">
            {% if h.book.cover_img %}<img src="{{ h.book.cover_img.url }}" alt="" loading="lazy">
            {% else %}<div class="vm-cont-thumb-e">ğŸ§</div>{% endif %}
          </div>
          <div class="vm-cont-info">
            <div class="vm-cont-name">{{ h.book.name }}</div>
            <div class="vm-cont-ep">{{ h.content.number }}í™” Â· {{ h.content.title }}</div>
            <div class="vm-cont-time">{{ h.last_position|floatformat:0 }}ì´ˆ</div>
          </div>
          <div class="vm-cont-btn">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- ì‹ ì‘ íƒìƒ‰ (ë¡œê·¸ì¸ ë¶ˆí•„ìš”) -->
    <div id="vm-browse" class="vm-inner vm-section">
      <div class="vm-hdr">
        <div>
          <div class="vm-eyebrow">ì‹ ì‘ ì˜¤ë””ì˜¤ë¶</div>
          <h2 class="vm-title">ì§€ê¸ˆ <span class="ac">ì—…ë¡œë“œëœ</span> ì‘í’ˆ</h2>
        </div>
        <a href="#" class="vm-more">ì „ì²´ ë³´ê¸° â†’</a>
      </div>

      <div class="vm-chips">
        <div class="vm-chip on" data-g="">ì „ì²´</div>
        {% for genre in genres_list %}
        <div class="vm-chip" data-g="{{ genre.id }}">{{ genre.name }}</div>
        {% endfor %}
      </div>

      <div class="vm-grid" id="vmGrid" data-url="{% url 'main:filter_books' %}">
        {% for book in new_books %}
        <div class="vm-bk">
          <a href="{% url 'book:book_detail' book.public_uuid %}">
            <div class="vm-bk-cover">
              {% if book.cover_img %}<img src="{{ book.cover_img.url }}" alt="{{ book.name }}" loading="lazy">
              {% else %}<div class="vm-bk-empty">ğŸ“š</div>{% endif %}
              {% if book.genres.all.0 %}<div class="vm-bk-genre">{{ book.genres.all.0.name }}</div>{% endif %}
              <div class="vm-bk-hover"><div class="vm-play-btn"><svg width="13" height="13" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg></div></div>
            </div>
            <div class="vm-bk-meta">
              <div class="vm-bk-name">{{ book.name }}</div>
              <div class="vm-bk-author">{{ book.user.nickname }}</div>
              <div class="vm-bk-score"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"/></svg>{{ book.book_score|default:"0.0" }}</div>
            </div>
          </a>
        </div>
        {% empty %}<div class="vm-empty">ì•„ì§ ë“±ë¡ëœ ì‘í’ˆì´ ì—†ì–´ìš”</div>
        {% endfor %}
      </div>
    </div>

    <!-- ì‹¤ì‹œê°„ ì¸ê¸° ì°¨íŠ¸ -->
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-eyebrow"><span class="vm-live"></span>ì‹¤ì‹œê°„ ì¸ê¸° ì°¨íŠ¸</div>
      <h2 class="vm-title">ì˜¤ëŠ˜ì˜ <span class="ac">TOP 10</span></h2>
      <div class="vm-rank-list">
        {% for book in popular_books|slice:":10" %}
        <a href="{% url 'book:book_detail' book.public_uuid %}" class="vm-rank-row">
          <div class="vm-rn {% if forloop.counter == 1 %}g1{% elif forloop.counter == 2 %}g2{% elif forloop.counter == 3 %}g3{% endif %}">{{ forloop.counter }}</div>
          <div class="vm-rthumb">
            {% if book.cover_img %}<img src="{{ book.cover_img.url }}" alt="" loading="lazy">
            {% else %}<div class="vm-rthumb-empty">ğŸ“–</div>{% endif %}
          </div>
          <div class="vm-rinfo">
            <div class="vm-rtitle">{{ book.name }}</div>
            <div class="vm-rauthor">{{ book.user.nickname }}</div>
            {% if book.genres.all.0 %}<div class="vm-rgenre">{{ book.genres.all.0.name }}</div>{% endif %}
          </div>
          <div class="vm-rscore">â­ {{ book.book_score|default:"0.0" }}</div>
        </a>
        {% empty %}<div class="vm-empty">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘</div>
        {% endfor %}
      </div>
    </div>

    <!-- ìµœì‹  ì—í”¼ì†Œë“œ -->
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-hdr">
        <div>
          <div class="vm-eyebrow">ìµœì‹  ì—…ë°ì´íŠ¸</div>
          <h2 class="vm-title">ë°©ê¸ˆ <span class="ac">ì˜¬ë¼ì˜¨</span> ì—í”¼ì†Œë“œ</h2>
        </div>
      </div>
      <div class="vm-ep-strip">
        {% for ep in latest_episode %}
        <a href="{% url 'book:content_detail' ep.public_uuid %}" class="vm-ep-card">
          <div class="vm-ep-thumb">
            {% if ep.book.cover_img %}<img src="{{ ep.book.cover_img.url }}" alt="" loading="lazy">
            {% else %}<div class="vm-ep-thumb-empty">ğŸ§</div>{% endif %}
            <div class="vm-ep-new">NEW</div>
          </div>
          <div class="vm-ep-body">
            <div class="vm-ep-n">{{ ep.number }}í™”</div>
            <div class="vm-ep-t">{{ ep.title }}</div>
            <div class="vm-ep-b">{{ ep.book.name }}</div>
          </div>
        </a>
        {% empty %}<div class="vm-empty">ìµœì‹  ì—í”¼ì†Œë“œê°€ ì—†ì–´ìš”</div>
        {% endfor %}
      </div>
    </div>

    <!-- ì¥ë¥´ë³„ íë ˆì´ì…˜ -->
    {% for item in genres_with_books %}
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-hdr">
        <div>
          <div class="vm-eyebrow">ì¥ë¥´ íë ˆì´ì…˜</div>
          <h2 class="vm-title"><span class="ac">{{ item.genre.name }}</span> ì¸ê¸°ì‘</h2>
        </div>
        <a href="{% url 'main:genres_books' item.genre.id %}" class="vm-more">ë”ë³´ê¸° â†’</a>
      </div>
      <div class="vm-grid">
        {% for book in item.books %}
        <div class="vm-bk">
          <a href="{% url 'book:book_detail' book.public_uuid %}">
            <div class="vm-bk-cover">
              {% if book.cover_img %}<img src="{{ book.cover_img.url }}" alt="{{ book.name }}" loading="lazy">
              {% else %}<div class="vm-bk-empty">ğŸ“š</div>{% endif %}
              <div class="vm-bk-hover"><div class="vm-play-btn"><svg width="13" height="13" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg></div></div>
            </div>
            <div class="vm-bk-meta">
              <div class="vm-bk-name">{{ book.name }}</div>
              <div class="vm-bk-author">{{ book.user.nickname }}</div>
              <div class="vm-bk-score"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"/></svg>{{ book.book_score|default:"0.0" }}</div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}

    <!-- CTA -->
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-cta">
        <div class="vm-cta-text">
          <h2>ì§€ê¸ˆ ì—¬ê¸°ì„œ, ì°½ì‘ìë¡œ ë°ë·”í•˜ì„¸ìš” âœ¨</h2>
          <p>ì›¹ì†Œì„¤ ì´ˆë³´ë„, ë¸ŒëŸ°ì¹˜ ì‘ê°€ ì§€ë§ìƒë„, ì„¸ê³„ê´€ ë§Œë“œëŠ” ì‚¬ëŒë„ â€” ë‹¹ì‹ ì˜ ì²« ì˜¤ë””ì˜¤ë¶ì„ AIê°€ ë„ì™€ë“œë¦½ë‹ˆë‹¤.</p>
        </div>
        <div class="vm-cta-action">
          {% if user.is_authenticated %}
            <a href="{% url 'book:book_tos' %}" class="vm-btn-cta">ì²« ì‘í’ˆ ë§Œë“¤ê¸° â†’</a>
          {% else %}
            <a href="#" onclick="openLogin(); return false;" class="vm-btn-cta">ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸° â†’</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- ì´ë‹¬ì˜ ì‘ê°€ -->
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-eyebrow">ì´ë‹¬ì˜ ì‘ê°€</div>
      <h2 class="vm-title">í™œë°œíˆ í™œë™ ì¤‘ì¸ <span class="ac">í¬ë¦¬ì—ì´í„°</span></h2>
      <div class="vm-authors">
        {% for author in popular_authors %}
        <a href="{% url 'main:user_info' author.public_uuid %}" class="vm-auth-pill">
          <div class="vm-auth-rank">{{ forloop.counter }}</div>
          <div class="vm-auth-av">
            {% if author.user_img %}<img src="{{ author.user_img.url }}" alt="{{ author.nickname }}" loading="lazy">
            {% else %}{{ author.nickname|slice:":1"|upper }}{% endif %}
          </div>
          <div>
            <div class="vm-auth-name">{{ author.nickname }}</div>
            <div class="vm-auth-cnt">ì‘í’ˆ {{ author.book_count }}ê°œ</div>
          </div>
        </a>
        {% empty %}<div class="vm-empty">ì‘ê°€ ì •ë³´ ì—†ìŒ</div>
        {% endfor %}
      </div>
    </div>

    <!-- ì¥ë¥´ ì¶”ì²œ (ë¡œê·¸ì¸) -->
    {% if user.is_authenticated and recommended_books %}
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-eyebrow">ë§ì¶¤ ì¶”ì²œ</div>
      <h2 class="vm-title">{{ user.nickname }}ë‹˜ì˜ <span class="ac">ì¥ë¥´ ì¶”ì²œ</span></h2>
      <div class="vm-grid">
        {% for book in recommended_books %}
        <div class="vm-bk"><a href="{% url 'book:book_detail' book.public_uuid %}">
          <div class="vm-bk-cover">
            {% if book.cover_img %}<img src="{{ book.cover_img.url }}" alt="{{ book.name }}" loading="lazy">{% else %}<div class="vm-bk-empty">ğŸ“š</div>{% endif %}
            <div class="vm-bk-hover"><div class="vm-play-btn"><svg width="13" height="13" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg></div></div>
          </div>
          <div class="vm-bk-meta">
            <div class="vm-bk-name">{{ book.name }}</div>
            <div class="vm-bk-author">{{ book.user.nickname }}</div>
            <div class="vm-bk-score"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"/></svg>{{ book.book_score|default:"0.0" }}</div>
          </div>
        </a></div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- AI ì¶”ì²œ (ë¡œê·¸ì¸) -->
    {% if user.is_authenticated and ai_recommended_books %}
    <div class="vm-inner vm-section" style="padding-top:0;">
      <div class="vm-eyebrow">AI ì¶”ì²œ</div>
      <h2 class="vm-title"><span class="ac">AIê°€ ê³ ë¥¸</span> ë§ì¶¤ ì‘í’ˆ</h2>
      <div class="vm-grid">
        {% for book in ai_recommended_books %}
        <div class="vm-bk"><a href="{% url 'book:book_detail' book.public_uuid %}">
          <div class="vm-bk-cover">
            {% if book.cover_img %}<img src="{{ book.cover_img.url }}" alt="{{ book.name }}" loading="lazy">{% else %}<div class="vm-bk-empty">ğŸ“š</div>{% endif %}
            <div class="vm-bk-hover"><div class="vm-play-btn"><svg width="13" height="13" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg></div></div>
          </div>
          <div class="vm-bk-meta">
            <div class="vm-bk-name">{{ book.name }}</div>
            <div class="vm-bk-author">{{ book.user.nickname }}</div>
            <div class="vm-bk-score"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"/></svg>{{ book.book_score|default:"0.0" }}</div>
          </div>
        </a></div>
        {% endfor %}
      </div>
      <div class="ai-recommend-section" style="margin-top:28px;">
        <a class="ai-recommend-btn" href="ai_recommended/">âœ¨ AI ì¶”ì²œ ì´ìœ  ë³´ê¸°</a>
      </div>
    </div>
    {% endif %}

  </div><!-- /vm-ab -->


  <!-- ============================================================
       PANEL: AI ì†Œì„¤
       ============================================================ -->
  <div id="vm-ai" class="vm-panel">
    <div class="vm-inner vm-section">
      <div class="vm-eyebrow">AI Interactive Story</div>
      <h2 class="vm-title">AIì™€ í•¨ê»˜ ì“°ëŠ” <span class="ac">ì´ì•¼ê¸°</span></h2>

      <div class="ai-sub-tab-buttons" style="margin-top:24px;">
        <div class="ai-sub-tab-btn active" data-ai-tab="vm-ai-s">ğŸŒ™ AI Story</div>
        <div class="ai-sub-tab-btn" data-ai-tab="vm-shared-s">ğŸ“– ê³µìœ í•œ AI ì†Œì„¤</div>
      </div>

      <div id="vm-ai-s" class="ai-sub-panel active" style="margin-top:20px;">
        <div class="ai-story-grid">
          {% for story in ai_stories|slice:":30" %}
            {% if story.public_uuid %}
            <div class="ai-story-card">
              <a href="{% url 'character:story_intro' story.public_uuid %}" class="card-link">
                <div class="card-image-box">
                  {% if story.story_desc_video %}
                    <video class="card-image" autoplay loop muted playsinline preload="none" data-src="{{ story.story_desc_video.url }}"></video>
                  {% elif story.cover_image %}
                    <img src="{{ story.cover_image.url }}" alt="{{ story.title }}" class="card-image" loading="lazy">
                  {% else %}
                    <div class="card-placeholder"><span class="placeholder-icon">ğŸŒ™</span></div>
                  {% endif %}
                  <div class="card-gradient-overlay"></div>
                  <div class="card-content">
                    <div class="card-title">{{ story.title }}</div>
                    {% if story.description %}<div class="card-desc">{{ story.description|truncatewords:15 }}</div>{% endif %}
                  </div>
                </div>
              </a>
            </div>
            {% endif %}
          {% empty %}
          <div class="empty-card" style="grid-column:1/-1;">
            <p>ì•„ì§ ë“±ë¡ëœ AI ì†Œì„¤ì´ ì—†ì–´ìš”</p>
            <a href="{% url 'character:make_ai_story' %}" class="empty-btn">ìŠ¤í† ë¦¬ ë§Œë“¤ê¸°</a>
          </div>
          {% endfor %}
        </div>
      </div>

      <div id="vm-shared-s" class="ai-sub-panel" style="margin-top:20px;">
        <div class="ai-story-grid">
          {% for conv in user_share_list %}
          <div class="ai-story-card">
            <a href="{% url 'main:shared_novel' conv.id %}" class="card-link">
              <div class="card-image-box">
                {% if conv.llm.llm_image %}<img src="{{ conv.llm.llm_image.url }}" alt="{{ conv.llm.name }}" class="card-image" loading="lazy">
                {% else %}<div class="card-placeholder"><span class="placeholder-icon">ğŸ“–</span></div>{% endif %}
                <div class="card-gradient-overlay">
                  <div class="user-nickname">
                    {% if conv.user.user_img %}<img src="{{ conv.user.user_img.url }}" alt="{{ conv.user.nickname }}">
                    {% else %}{{ conv.user.nickname|slice:":1"|upper }}{% endif %}
                    <span>{{ conv.user.nickname }}</span>
                  </div>
                </div>
                <div class="card-content">
                  <div class="card-title">{{ conv.merged_audio_title|default:conv.llm.name }}</div>
                  {% if conv.messages.exists %}<div class="card-desc">{{ conv.messages.first.content|truncatechars:40|safe }}</div>
                  {% else %}<div class="card-desc">ì•„ì§ ëŒ€í™”ê°€ ì‹œì‘ë˜ì§€ ì•Šì•˜ì–´ìš”</div>{% endif %}
                </div>
              </div>
            </a>
            <div class="card-meta">{{ conv.user.nickname|default:'ìµëª…' }} Â· {{ conv.shared_at|date:"m.d H:i" }}</div>
          </div>
          {% empty %}
          <div class="empty-card" style="grid-column:1/-1;">
            <p>ì•„ì§ ê³µê°œëœ AI ëŒ€í™”ê°€ ì—†ì–´ìš”</p>
            <a href="{% url 'character:make_ai_story' %}" class="empty-btn">ìŠ¤í† ë¦¬ ë§Œë“¤ê¸°</a>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div><!-- /vm-ai -->


  <!-- ============================================================
       FOOTER
       ============================================================ -->
  <footer class="vm-footer">
    <div class="vm-inner">
      <div class="vm-footer-g">
        <div>
          <div class="vm-footer-logo">VOXLIBER</div>
          <p class="vm-footer-desc">AI ê¸°ìˆ ë¡œ ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼<br>ìƒìƒí•œ ì˜¤ë””ì˜¤ë¶ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.<br>ì´ˆë³´ ì°½ì‘ìì˜ ì²« ë¬´ëŒ€ê°€ ë˜ê² ìŠµë‹ˆë‹¤.</p>
        </div>
        <div class="vm-footer-col">
          <h4>ì„œë¹„ìŠ¤</h4>
          <ul>
            <li><a href="/book/book-snap/" data-login-required>SNAP</a></li>
            <li><a href="/book/author-dashboard/" data-login-required>ì‘ê°€ ì„¼í„°</a></li>
            <li><a href="#">ìš”ê¸ˆì œ</a></li>
          </ul>
        </div>
        <div class="vm-footer-col">
          <h4>ê³ ê° ì§€ì›</h4>
          <ul>
            <li><a href="faq/">FAQ</a></li>
            <li><a href="notice/">ê³µì§€ì‚¬í•­</a></li>
            <li><a href="contact/" data-login-required>ë¬¸ì˜í•˜ê¸°</a></li>
          </ul>
        </div>
        <div class="vm-footer-col">
          <h4>ë²•ì  ì •ë³´</h4>
          <ul>
            <li><a href="terms/of/service/">ì´ìš©ì•½ê´€</a></li>
            <li><a href="privacy/policy/">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></li>
            <li><a href="copyright/policy/">ì €ì‘ê¶Œ ì •ì±…</a></li>
            <li><a href="youth/protection/">ì²­ì†Œë…„ ë³´í˜¸ì •ì±…</a></li>
          </ul>
        </div>
      </div>
      <div class="vm-footer-bot">
        <div class="vm-footer-copy">Â© 2025 VOXLIBER. All rights reserved.</div>
      </div>
    </div>
  </footer>

</div><!-- /vm-page -->
{% endblock %}


{% block extra_js %}
<script src="{% static 'js/home/main.js' %}"></script>
<script src="{% static 'js/common/login_btn.js' %}"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {

  /* â”€â”€ ë©”ì¸ íƒ­ â”€â”€ */
  document.querySelectorAll('.vm-tab').forEach(function (tab) {
    tab.addEventListener('click', function () {
      document.querySelectorAll('.vm-tab').forEach(function (t) { t.classList.remove('active'); });
      document.querySelectorAll('.vm-panel').forEach(function (p) { p.classList.remove('active'); });
      tab.classList.add('active');
      var panel = document.getElementById(tab.dataset.p);
      if (panel) panel.classList.add('active');
    });
  });

  /* â”€â”€ AI ì„œë¸Œ íƒ­ â”€â”€ */
  document.querySelectorAll('.ai-sub-tab-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      document.querySelectorAll('.ai-sub-tab-btn').forEach(function (b) { b.classList.remove('active'); });
      document.querySelectorAll('.ai-sub-panel').forEach(function (p) { p.classList.remove('active'); });
      btn.classList.add('active');
      var panel = document.getElementById(btn.dataset.aiTab);
      if (panel) panel.classList.add('active');
    });
  });

  /* â”€â”€ ì¥ë¥´ ì¹© í•„í„° â”€â”€ */
  var chips = document.querySelectorAll('.vm-chip[data-g]');
  var grid  = document.getElementById('vmGrid');

  chips.forEach(function (chip) {
    chip.addEventListener('click', function () {
      chips.forEach(function (c) { c.classList.remove('on'); });
      chip.classList.add('on');
      var gid = chip.dataset.g;
      if (!grid) return;
      grid.style.opacity = '.45';

      fetch((grid.dataset.url || '') + '?genre_id=' + gid)
        .then(function (r) { return r.json(); })
        .then(function (data) {
          grid.innerHTML = '';
          grid.style.opacity = '1';
          if (!data.books || !data.books.length) {
            grid.innerHTML = '<div class="vm-empty">í•´ë‹¹ ì¥ë¥´ ì‘í’ˆì´ ì—†ì–´ìš”</div>';
            return;
          }
          data.books.forEach(function (book) {
            var d = document.createElement('div');
            d.className = 'vm-bk';
            d.innerHTML = `<a href="/book/${book.public_uuid}/">
              <div class="vm-bk-cover">
                ${book.cover_img ? `<img src="${book.cover_img}" alt="${book.name}" loading="lazy">` : `<div class="vm-bk-empty">ğŸ“š</div>`}
                ${book.genre ? `<div class="vm-bk-genre">${book.genre}</div>` : ''}
                <div class="vm-bk-hover"><div class="vm-play-btn"><svg width="13" height="13" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg></div></div>
              </div>
              <div class="vm-bk-meta">
                <div class="vm-bk-name">${book.name}</div>
                <div class="vm-bk-author">${book.author||''}</div>
                <div class="vm-bk-score"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01z"/></svg>${book.book_score||'0.0'}</div>
              </div></a>`;
            grid.appendChild(d);
          });
        })
        .catch(function () { grid.style.opacity = '1'; });
    });
  });

  /* â”€â”€ í”„ë¡œëª¨ ìŠ¬ë¼ì´ë” â”€â”€ */
  var track = document.getElementById('vmPromoTrack');
  var pdots = document.querySelectorAll('.vm-promo-dot');
  var total = pdots.length;
  var cur   = 0;

  function goSlide(n) {
    cur = (n + total) % total;
    if (track) track.style.transform = 'translateX(-' + (cur * 100) + '%)';
    pdots.forEach(function (d, i) { d.classList.toggle('on', i === cur); });
  }

  var pp = document.getElementById('vmPromoPrev');
  var pn = document.getElementById('vmPromoNext');
  if (pp) pp.addEventListener('click', function () { goSlide(cur - 1); });
  if (pn) pn.addEventListener('click', function () { goSlide(cur + 1); });
  pdots.forEach(function (d) {
    d.addEventListener('click', function () { goSlide(parseInt(d.dataset.i)); });
  });
  if (total > 1) setInterval(function () { goSlide(cur + 1); }, 4500);

  /* â”€â”€ Lazy video â”€â”€ */
  document.querySelectorAll('.ai-story-card video[data-src]').forEach(function (v) {
    new IntersectionObserver(function (entries, o) {
      if (entries[0].isIntersecting) {
        v.innerHTML = '<source src="' + v.dataset.src + '" type="video/mp4">';
        v.load();
        o.disconnect();
      }
    }, { rootMargin: '200px' }).observe(v);
  });

});
</script>
{% endblock %}