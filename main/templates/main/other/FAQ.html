{% extends "base.html" %}
{% load static %}

{% block title %}FAQ | VOXLIBER{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/main/legal_pages.css' %}">
{% endblock %}

{% block content %}
<div class="faq-wrapper">
    <h1>자주 묻는 질문 (FAQ)</h1>

{% regroup faqs by category_display as category_list %}

    {% for category in faq_list_by_category %}
    <div class="faq-category">
        <h2>{{ category.grouper }}</h2>

        {% for faq in category.list %}
        <div class="faq-item">
            <div class="faq-question">{{ faq.question }}</div>
            <div class="faq-answer">{{ faq.answer|linebreaksbr }}</div>
        </div>
        {% endfor %}

    </div>
    {% endfor %}
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const questions = document.querySelectorAll(".faq-question");
    questions.forEach(q => {
        q.addEventListener("click", () => {
            const answer = q.nextElementSibling;

            // Toggle active class on question
            q.classList.toggle("active");

            // Toggle active class on answer
            if (answer.classList.contains("active")) {
                answer.classList.remove("active");
                setTimeout(() => {
                    answer.style.display = "none";
                }, 300);
            } else {
                answer.style.display = "block";
                setTimeout(() => {
                    answer.classList.add("active");
                }, 10);
            }
        });
    });
});
</script>
{% endblock %}
